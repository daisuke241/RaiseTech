# 第7回課題　

## 課題で作成した環境はどんな攻撃にたいして「脆弱」でどのような対策が取れそうか？

### 課題の感想

攻撃方法や対策を調べるなかで、
攻撃は攻撃者の本当にやりたいことのきっかけを作る為の手段に過ぎないと感じました。
対策の印象は攻撃者の本当にやりたいことのきっかけにさせないようにすることであり、たとえ突破されてもいいように複数の対策を準備して対処できるようにしてると感じました。
そしてどんな攻撃にたいして「脆弱」でどのような対策が取れそうかという順番で考えると、
攻撃に対しての脆弱性はわかるが攻撃者や攻撃に対し後追いする形になりサービスや情報を守りきれないと思いました。
攻撃から脆弱性を調べるより脆弱性から攻撃方法を調べるほうが簡単に思えました。

### 脆弱な点と攻撃方法や対策

#### Webアプリケーション

##### 脆弱な点

外部入力をSQL文の一部として信頼してそのまま使ってしまいユーザー入力をそのままSQL文に組み込み処理する

##### 攻撃

SQLインジェクション （不正なSQLコードをデータベースに注入し、情報を窃取したり、データを改ざんしたり、サービスを停止させたりする）

##### 対策

・プレースホルダの利用
・ActiveRecordの利用

##### 脆弱な点

ユーザーから受け取った入力を、そのままHTMLとしてブラウザに返してしまう

##### 攻撃

XSS（投稿や入力欄にJavaScriptを埋め込まれる）

##### 対策

・サニタイジング（スクリプトの無害化）
・入力値を制限する
・WAF（Web Application Firewall）導入

##### 脆弱な点

アクセス権限の認可不足で本来アクセスできないはずの機能やデータにアクセスできてしまう

##### 攻撃

Broken Access Control（アクセスコントロールの不備）

##### 対策

・アクセス権限の管理を適切におこなう


#### OS、ミドルウェア

##### 脆弱な点　

入力値をそのままシェルに受け渡すような設計になっている

##### 攻撃

OSコマンド・インジェクション（Webサイトに向けて不正な入力を行うことにより、Webサーバ側で想定していない動作をさせる攻撃）

##### 対策

・WAF（Web Application Firewall）導入

##### 脆弱な点

古いバージョンのソフトウェアは脆弱性が既知されている

##### 攻撃

Outdated Software（既知の脆弱性を狙った攻撃）

##### 対策

・定期的にgemやライブラリのアップデート


#### ネットワーク、その他への攻撃と対策

##### 脆弱な点

サーバーやネットワーク機器が処理できるリクエスト数や通信の量には限界がありその限界を超えるとサーバーが遅くなったり止まったりしてしまう

##### 攻撃

DDoS（ALBやNginxに大量のアクセスを送りサービス停止させる）

##### 対策

・不正な通信を検知・遮断するWAF（Web Application Firewall）の導入
・トラフィックを分散させるCDN（Content Delivery Network）の活用
・DoS攻撃への対策としてIPアドレス制限とリソース監視

##### 脆弱な点

 開放されているポートが多い、不要なポートを閉じていない

##### 攻撃

Port Scanning（応答から稼働状況を調べ攻撃の情報収集をするためEC2やRDSの開いてるポートを探す
）

##### 対策

・不要なポートは閉じる
・サーバーを常に最新の状態に保つ
・WAF（Web Application Firewall）の導入

##### 脆弱な点

過度なIAMポリシーを付与

##### 攻撃

Excessive Permissions（過剰な権限付与）

##### 対策

・最小権限の原則（Least Privilege）を守る
・使っていないなら IAMロールを削除する、または読み取り専用にする
・CloudTrailやConfigでログを記録する